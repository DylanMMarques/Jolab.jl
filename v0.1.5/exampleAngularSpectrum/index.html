<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Angular Spectrum · Jolab.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Jolab.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Optical components</span><ul><li><a class="tocitem" href="../MultilayerStructure/">Multilayer Structure</a></li><li><a class="tocitem" href="../Lens/">Lens</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../exampleComponent/">Sequential modelling</a></li><li class="is-active"><a class="tocitem" href>Angular Spectrum</a><ul class="internal"><li><a class="tocitem" href="#Defining-a-light-field-in-space"><span>Defining a light field in space</span></a></li><li><a class="tocitem" href="#Transforming-to-an-Angular-Spectrum"><span>Transforming to an Angular Spectrum</span></a></li><li><a class="tocitem" href="#Transforming-back-to-the-field-in-space"><span>Transforming back to the field in space</span></a></li><li><a class="tocitem" href="#The-application-of-the-Angular-Spectrum"><span>The application of the Angular Spectrum</span></a></li><li><a class="tocitem" href="#Using-both-formalism"><span>Using both formalism</span></a></li></ul></li><li><a class="tocitem" href="../exampleAiry/">Fabry-Pérot etalon</a></li><li><a class="tocitem" href="../exampleMultimodeFibre/">Multimode Fibre</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Angular Spectrum</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Angular Spectrum</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/DylanMMarques/Jolab.jl/blob/master/docs/src/exampleAngularSpectrum.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Angular-Spectrum"><a class="docs-heading-anchor" href="#Angular-Spectrum">Angular Spectrum</a><a id="Angular-Spectrum-1"></a><a class="docs-heading-anchor-permalink" href="#Angular-Spectrum" title="Permalink"></a></h1><p>This is an example from Jolab to familiarise an user with the concept of angular spectrum.</p><p>The first step is to load the Jolab and a plotting package</p><pre><code class="language-julia">using Jolab
using Plots; plotly()</code></pre><h2 id="Defining-a-light-field-in-space"><a class="docs-heading-anchor" href="#Defining-a-light-field-in-space">Defining a light field in space</a><a id="Defining-a-light-field-in-space-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-a-light-field-in-space" title="Permalink"></a></h2><p>We start by defining a focused Gaussian beam in space.</p><pre><code class="language-julia">λ = 1550E-9 # wavelength in meters
σ = 5E-6 # Gaussian beam waist in meters. Defined based on where the intensity decreases to 1/e²
x = σ .* collect(range(-1.5, 1.5, length = 128)); # Position x in meters where the field is evaluated
y = σ .* collect(range(-1.5, 1.5, length = 128)); # Position y in meters where the field is evaluated
n = Jolab.refractiveindex_air(printBool= false); # Refractive index of the medium
dir = 1; # Direction of propagation of the field (forward 1 or backward -1)
ref = ReferenceFrame(0 , 0, 0); # Position in mirrors of the field (x,y,z)
fieldspace = FieldSpaceScalar_gaussian(x, y, σ, λ, n(λ), dir, ref); # Creation of the field
plot(fieldspace, fill = true, c = :amp) # Display the field intensity</code></pre><p>The field calculated on the section above is defined based on the field distribution in space, i.e. we know the amplitude and phase of the field in the positions (x,y). If we would put a camera in front of the field, the data acquired would be the graph plotted above.</p><h2 id="Transforming-to-an-Angular-Spectrum"><a class="docs-heading-anchor" href="#Transforming-to-an-Angular-Spectrum">Transforming to an Angular Spectrum</a><a id="Transforming-to-an-Angular-Spectrum-1"></a><a class="docs-heading-anchor-permalink" href="#Transforming-to-an-Angular-Spectrum" title="Permalink"></a></h2><p>An optical field can be interpreted in different ways. For example, instead of assuming our field as a distribution in space we can assume the field as a distribution of plane waves with different directions of propagation, i.e. the field is composed as a distribution of plane waves with complex amplitude E(n sx, n sy) propagating with direction (nsx,nsy). nsx and nsy are the spatial frequencies and related with the angle of propagation (θ,ϕ) by (n sin(θ) cos(ϕ), n sin(θ)sin(ϕ)) where n is the medium refractive index. This way of interpreting the field is commonly called angular spectrum.</p><p>The angular spectrum of a field is calculated by 2D Fourrier Transform the field distribution in space. Jolab has already a function to calculate the angular spectrum based on a field distribution in space.</p><pre><code class="language-julia">nsx = range(-.5, .5, length = 128); #x spatial frequencies where the field is evaluated
nsy = range(-.5, .5, length = 128); #y spatial frequencies where the field is evaluated
fourier = FourierTransform(x, y, nsx, nsy) 
(tmp, angspe) = lightinteraction(fourier, fieldspace); # calculate the angular spectrum from the field distribution in space
plot(angspe, fill = true, c = :amp)</code></pre><p>The color scale of the graph above represent the amplitude of the plane wave and the x,y axis the nsx and nsy spatial frequencies, i.e. the direction of the respective plane wave. This can be illustrator by changing the distribution of the plane wave amplitude so that the field just has one angular component.</p><pre><code class="language-julia">angspeTest = deepcopy(angspe) # create a copy of the angspe
angspeTest.e_SXY .= 0.; # Set all plane waves amplitude to 0
angspeTest.e_SXY[LinearIndices((128,128))[64,64]] = 1; # Choose a plane a set amplitude 1. For the index [64,64] the plane wave is propagating parallel to the z axis
(tmp, fieldspaceTest) = lightinteraction(fourier, angspeTest) # Calculates the field in space
plot(fieldspaceTest, type = :real, fill = true, c = :bluesreds) # Plot the real part of the field.
# The field does not look like a prefect plane wave due to the non-traditional fourier transform implementation in Jolab. This non-traditional implementation improves the accuracy of the numerical evaluation of the fourier transform.</code></pre><p>The code above shows that if we only have a single component defined on the angular spectrum the respective field in space corresponds to a plane wave. We recommend the user to play with the code and changing the index which will change the direction of the plane wave.</p><h2 id="Transforming-back-to-the-field-in-space"><a class="docs-heading-anchor" href="#Transforming-back-to-the-field-in-space">Transforming back to the field in space</a><a id="Transforming-back-to-the-field-in-space-1"></a><a class="docs-heading-anchor-permalink" href="#Transforming-back-to-the-field-in-space" title="Permalink"></a></h2><p>From an angular spectrum we can calculate the field in space using the respective inverse transformation.</p><pre><code class="language-julia">(tmp, fieldspace2) = lightinteraction(fourier, angspe);
plot(fieldspace2, fill = true, c = :amp)</code></pre><p>The code above transformed the field back to its distribution in space and ,as we can see, fieldspace2 is identical to fieldspace which was initially calculated. It is important to understand that defining a field in space or as a angular spectrum is irrelevant as the information about the field is the same but just in another format. The user can always switch between the spatial field and the angular spectrum using the respective function (angspetofield and fieldtoangspe). The only errors induced are due to evaluating the 2D fourrier transform numerically.</p><h2 id="The-application-of-the-Angular-Spectrum"><a class="docs-heading-anchor" href="#The-application-of-the-Angular-Spectrum">The application of the Angular Spectrum</a><a id="The-application-of-the-Angular-Spectrum-1"></a><a class="docs-heading-anchor-permalink" href="#The-application-of-the-Angular-Spectrum" title="Permalink"></a></h2><p>The angular spectrum allows to calculate how a plane wave interacts with many optical components including multilayer structure, spheres and others. Another example, and the most basic, is to propagate an arbitrary field in free space. It is time consuming to calculate how a focused beam propagates in free space based on its distribution in space. However, it is very well known how a plane wave propagates in space and therefore, by considering the propagation of all plane waves, how an angular spectrum propagates.</p><h2 id="Using-both-formalism"><a class="docs-heading-anchor" href="#Using-both-formalism">Using both formalism</a><a id="Using-both-formalism-1"></a><a class="docs-heading-anchor-permalink" href="#Using-both-formalism" title="Permalink"></a></h2><p>Jolab was developed to use both formalism as it increases the versability. For some optical components, such multilayer structures, spheres, how light interacts with them is know for an incident plane wave and therefore the angular spectrum is used. On other scenarios, such as cameras and detectors, the toolbox requires the field in space to calculate the signal measured.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../exampleComponent/">« Sequential modelling</a><a class="docs-footer-nextpage" href="../exampleAiry/">Fabry-Pérot etalon »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 2 November 2021 14:14">Tuesday 2 November 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
